<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkmate MVP</title>
<style>
  body { margin:0; display:flex; flex-direction:column; align-items:center; font-family:sans-serif; background:#264d21; color:#fff; }
  #board { display:grid; grid-template-columns:repeat(8,60px); grid-template-rows:repeat(8,60px); gap:1px; margin:20px; }
  .cell { width:60px; height:60px; display:flex; align-items:center; justify-content:center; background:#83b77b; }
  .cell.dark { background:#437d3c; }
  .pawn { width:40px; height:40px; background:#fff; border-radius:50%; cursor:pointer; }
  .enemy { width:40px; height:40px; background:#ce2f2f; border-radius:50%; }
  #ui { margin-top:10px; }
  button { padding:5px 10px; margin-left:10px; cursor:pointer; }
</style>
</head>
<body>

<h2>Checkmate MVP</h2>
<div id="board"></div>
<div id="ui">
  Score: <span id="score">0</span> | Lives: <span id="lives">5</span>
  <button onclick="restartGame()">Restart</button>
</div>

<script>
const boardDiv = document.getElementById('board');
let board = Array.from({length:8},()=>Array(8).fill(null));
let enemies = [];
let score = 0;
let lives = 5;
let tick = 0;

// Render board
function renderBoard() {
  boardDiv.innerHTML = '';
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      const cell = document.createElement('div');
      cell.className = 'cell '+((r+c)%2?'dark':'');
      cell.dataset.r = r; cell.dataset.c = c;
      cell.onclick = ()=>placePawn(r,c);
      if(board[r][c]==='pawn') {
        const pawn = document.createElement('div'); pawn.className='pawn';
        cell.appendChild(pawn);
      }
      enemies.forEach(e=>{
        if(e.r===r && e.c===c){
          const enemy = document.createElement('div'); enemy.className='enemy';
          cell.appendChild(enemy);
        }
      });
      boardDiv.appendChild(cell);
    }
  }
}

// Place a pawn
function placePawn(r,c){
  if(board[r][c]==null){
    board[r][c]='pawn';
    renderBoard();
  }
}

// Spawn enemy at random top row
function spawnEnemy(){
  const col = Math.floor(Math.random()*8);
  enemies.push({r:0,c:col});
}

// Move enemies down
function moveEnemies(){
  enemies.forEach(e=>{
    const nextR = e.r+1;
    if(nextR>7){
      lives--; e.remove=true;
    } else if(board[nextR][e.c]==='pawn'){
      score++; e.remove=true;
    } else {
      e.r = nextR;
    }
  });
  enemies = enemies.filter(e=>!e.remove);
}

// Game loop
function gameTick(){
  tick++;
  if(lives<=0){
    alert('Game Over! Score: '+score);
    return;
  }
  if(tick%30===0) spawnEnemy();
  moveEnemies();
  document.getElementById('score').textContent=score;
  document.getElementById('lives').textContent=lives;
  renderBoard();
  requestAnimationFrame(gameTick);
}

// Restart
function restartGame(){
  board = Array.from({length:8},()=>Array(8).fill(null));
  enemies = [];
  score=0; lives=5; tick=0;
  renderBoard();
  gameTick();
}

// Init
renderBoard();
gameTick();
</script>
</body>
</html>
